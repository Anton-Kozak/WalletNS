<ns-action-bar></ns-action-bar>
<ScrollView>
    <StackLayout class="background" height="auto" [visibility]="!isLoading ? 'visible' : 'collapse'">
        <StackLayout data-aos="fade-zoom-in" data-aos-duration="600" data-aos-delay="500" class="card-stats" shadow="25">
            <StackLayout class="card-body">
                <StackLayout class="card-chart-text">
                    <StackLayout class="card-title">
                        <Label text="Wallet Members"></Label>
                    </StackLayout>
                </StackLayout>
                <GridLayout columns="1*, 7*, 1*, 1*" rows="50" *ngFor="let member of walletMembers" class="members">
                    <Label col="1" color="#ffb204" fontSize="18" [text]="member.username" class="text-capitalize"></Label>
                    <FlexboxLayout col="2" class="user-icon">
                        <Label (tap)="getUserStatistics(member.id)" text="&#xf007;" fontSize="18" class="fas"></Label>
                    </FlexboxLayout>
                </GridLayout>
            </StackLayout>
            <FlexboxLayout class="card-footer">
            </FlexboxLayout>
        </StackLayout>
        <StackLayout class="card-stats" shadow="25">
            <StackLayout class="card-body">
                <GridLayout columns="3*, 7*" rows="auto" class="card-row">
                    <StackLayout col="0" row="0" class="card-icon">
                        <Label class="far icon-text" color="#28a745" text="&#xf080;"></Label>
                    </StackLayout>
                    <StackLayout col="1" row="0" class="card-text">
                        <StackLayout class="card-title">
                            <Label textWarp="true" color="#28a745" text="Most Used Category"></Label>
                        </StackLayout>
                        <StackLayout class="card-desc">
                            <Label [text]="mostUsedCategory"></Label>
                        </StackLayout>
                    </StackLayout>
                </GridLayout>
            </StackLayout>
            <FlexboxLayout class="card-footer">
                <Label class="fas footer-icon" color="#28a745" text="&#xf080;"></Label>
                <Label class="footer-text" text="Number of expenses"></Label>
            </FlexboxLayout>
        </StackLayout>
        <StackLayout class="card-stats" shadow="25">
            <StackLayout class="card-body">
                <GridLayout columns="3*, 7*" rows="auto" class="card-row">
                    <StackLayout col="0" row="0" class="card-icon">
                        <Label class="fas icon-text" color="#6c757d" text="&#xf161;"></Label>
                    </StackLayout>
                    <StackLayout col="1" row="0" class="card-text">
                        <StackLayout class="card-title">
                            <Label textWarp="true" color="#6c757d" text="Most Spent Category"></Label>
                        </StackLayout>
                        <StackLayout class="card-desc">
                            <Label [text]="mostSpentCategory"></Label>
                        </StackLayout>
                    </StackLayout>
                </GridLayout>
            </StackLayout>
            <FlexboxLayout class="card-footer">
                <Label class="fas footer-icon" color="#6c757d" text="&#xf161;"></Label>
                <Label class="footer-text" text="Category with the largest expenses"></Label>
            </FlexboxLayout>
        </StackLayout>
        <StackLayout class="card-stats" shadow="25">
            <StackLayout class="card-body">
                <GridLayout columns="3*, 7*" rows="auto" class="card-row">
                    <StackLayout col="0" row="0" class="card-icon">
                        <Label class="fas icon-text" color="#ffc107" text="&#xf51e;"></Label>
                    </StackLayout>
                    <StackLayout col="1" row="0" class="card-text">
                        <StackLayout class="card-title">
                            <Label fontSize="17" color="#a38721" textWarp="true" text="Average Daily Expenses"></Label>
                        </StackLayout>
                        <StackLayout class="card-desc">
                            <Label [text]="avgDailyExpenses"></Label>
                        </StackLayout>
                    </StackLayout>
                </GridLayout>
            </StackLayout>
            <FlexboxLayout class="card-footer">
                <Label class="fas footer-icon" color="#ffc107" text="&#xf885;"></Label>
                <Label class="footer-text" text="Average per 1 day"></Label>
            </FlexboxLayout>
        </StackLayout>
        <StackLayout class="card-stats" shadow="25">
            <StackLayout class="card-body">
                <GridLayout columns="3*, 7*" rows="auto" class="card-row">
                    <StackLayout col="0" row="0" class="card-icon">
                        <Label class="fas icon-text" color="#007bff" text="&#xf688;"></Label>
                    </StackLayout>
                    <StackLayout col="1" row="0" class="card-text">
                        <StackLayout class="card-title">
                            <Label color="#007bff" text="Total Spent"></Label>
                        </StackLayout>
                        <StackLayout class="card-desc">
                            <Label [text]="amountOfMoneySpent"></Label>
                        </StackLayout>
                    </StackLayout>
                </GridLayout>
            </StackLayout>
            <FlexboxLayout class="card-footer">
                <Label class="fas footer-icon" color="#007bff" text="&#xf885;"></Label>
                <Label class="footer-text" text="Total sum"></Label>
            </FlexboxLayout>
        </StackLayout>

        <StackLayout *ngIf="topFiveUsers.length !== 0" class="card-chart">
            <GridLayout height="300" rows="*">
                <RadPieChart allowAnimation="true" row="0">
                    <DonutSeries seriesName="Pie" showLabels="true" tkPieSeries selectionMode="Notset" expandRadius="0.4" innerRadiusFactor="0.7" outerRadiusFactor="0.7" [items]="topFiveUsers" valueProperty="Amount" legendLabel="userName"></DonutSeries>
                    <RadLegendView tkPieLegend position="floating" title="Users" width="110" enableSelection="true">
                    </RadLegendView>
                    <Palette tkPiePalette seriesName="Pie">
                        <PaletteEntry tkPiePaletteEntry fillColor="#aaf0d1" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkPiePaletteEntry fillColor="#f0b4aa" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkPiePaletteEntry fillColor="#f0d6aa" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkPiePaletteEntry fillColor="#beaaf0" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkPiePaletteEntry fillColor="#aacaf0" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                    </Palette>
                </RadPieChart>
            </GridLayout>
        </StackLayout>


        <StackLayout class="card-chart">
            <GridLayout height="600" rows="*">
                <RadCartesianChart row="0">
                    <CategoricalAxis tkCartesianHorizontalAxis labelFitMode="Rotate" labelSize="20"></CategoricalAxis>
                    <LinearAxis tkCartesianVerticalAxis labelFitMode="Rotate" labelFormat="%.0f"></LinearAxis>
                    <BarSeries paletteMode="Item" showLabels="true" seriesName="Bar" tkCartesianSeries [items]="barExpenses" categoryProperty="Category" valueProperty="Amount">
                        <PointLabelStyle textFormat="%.0f" tkBarLabelStyle fillColor="#ffb204"></PointLabelStyle>
                    </BarSeries>
                    <Palette tkCartesianPalette seriesName="Bar">
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#F4B41C" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#F4A719" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#F39916" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#F38C13" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#CB7510" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>

                        <PaletteEntry tkCartesianPaletteEntry fillColor="#C0650C" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#B65509" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#AC4606" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#A13603" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>
                        <PaletteEntry tkCartesianPaletteEntry fillColor="#972600" strokeWidth="3" strokeColor="#ffb204"></PaletteEntry>

                    </Palette>
                </RadCartesianChart>
            </GridLayout>
        </StackLayout>

        <StackLayout class="card-chart">
            <GridLayout height="500" rows="*">
                <RadCartesianChart row="0" style="font-size: 12;">
                    <CategoricalAxis tkCartesianHorizontalAxis lineColor="#ffb204" ticksColor="#825B00" labelFitMode="Rotate"></CategoricalAxis>
                    <LinearAxis tkCartesianVerticalAxis lineColor="#ffb204" ticksColor="#825B00" labelFormat="%.0f"></LinearAxis>
                    <LineSeries tkCartesianSeries strokeColor="#ffb204" [items]="lastSixMonths" categoryProperty="month" valueProperty="expenseSum">
                    </LineSeries>
                </RadCartesianChart>
            </GridLayout>
        </StackLayout>

        <StackLayout [visibility]="hasPreviousMonths ? 'visible' : 'collapse'" class="card-chart m-b-20">
            <GridLayout height="500" rows="*">
                <RadCartesianChart row="0">
                    <CategoricalAxis labelTextColor="#ffb204" tkCartesianVerticalAxis labelSize="20"></CategoricalAxis>
                    <LinearAxis labelTextColor="#ffb204" tkCartesianHorizontalAxis labelFitMode="Rotate" labelFormat="%.0f"></LinearAxis>
                    <BarSeries seriesName="firstBar" strokeWidth="3" strokeColor="#ffb204" fillColor="#130D00" tkCartesianSeries [items]="currentMonthDataToCompare" categoryProperty="Category" valueProperty="Amount">
                        <PointLabelStyle tkBarLabelStyle fillColor="#f0b4aa"></PointLabelStyle>
                    </BarSeries>
                    <BarSeries seriesName="secondBar" strokeWidth="3" strokeColor="#ffb204" fillColor="#FFDF94" tkCartesianSeries [items]="lastMonthDataToCompare" categoryProperty="Category" valueProperty="Amount">
                        <PointLabelStyle tkBarLabelStyle fillColor="#f58b75"></PointLabelStyle>
                    </BarSeries>
                </RadCartesianChart>
            </GridLayout>
        </StackLayout>
    </StackLayout>

    <!-- ПРИМЕР CHART В CARD -->

    <!-- <StackLayout class="card-body">
                <StackLayout class="card-chart-text">
                    <StackLayout class="card-title">
                        <Label text="Expenses Comparison"></Label>
                    </StackLayout>
                    <StackLayout class="card-desc">
                        <Label text="Previous and Current Months"></Label>
                    </StackLayout>
                </StackLayout> 
                <StackLayout [visibility]="hasPreviousMonths ? 'visible' : 'collapse'" class="card-chart">
                    <GridLayout height="500" rows="*">
                        <RadCartesianChart row="0">
                            <CategoricalAxis tkCartesianVerticalAxis labelSize="20"></CategoricalAxis>
                            <LinearAxis tkCartesianHorizontalAxis labelFitMode="Rotate" labelFormat="%.0f"></LinearAxis>
                            <BarSeries seriesName="firstBar" strokeWidth="3" strokeColor="#ffb204" tkCartesianSeries [items]="currentMonthDataToCompare" categoryProperty="Category" valueProperty="Amount">
                                <PointLabelStyle tkBarLabelStyle fillColor="#f0b4aa"></PointLabelStyle>
        
                            </BarSeries>
                            <BarSeries seriesName="secondBar" strokeWidth="3" strokeColor="#ffb204" fillColor="#f0b4aa" tkCartesianSeries [items]="lastMonthDataToCompare" categoryProperty="Category" valueProperty="Amount">
                                <PointLabelStyle tkBarLabelStyle fillColor="#f58b75"></PointLabelStyle>
                            </BarSeries>
                        </RadCartesianChart>
                    </GridLayout>
                </StackLayout>
                 <FlexboxLayout class="card-footer">
                        <Label class="fas footer-icon" text="&#xf885;"></Label>
                        <Label class="footer-text" text="Number of expenses"></Label>
                    </FlexboxLayout>
            </StackLayout>
            </StackLayout> -->
</ScrollView>